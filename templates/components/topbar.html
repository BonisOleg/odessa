{% load static %}

<header class="topbar">
    <!-- –õ–æ–≥–æ—Ç–∏–ø + –§–ª–∞–≥ –∫—Ä–∞—ó–Ω–∏ + –¥–∞—Ç–∞/—á–∞—Å -->
    <div class="topbar__left">
        <div class="topbar__logo" style="margin-right: var(--spacing-md);">
            <a href="{% url 'myapp:company_list' %}" hx-get="{% url 'myapp:company_list' %}" hx-target="#main-content" hx-push-url="true" style="display: flex; align-items: center; text-decoration: none;">
                <img src="{% static 'img/logo.png' %}" alt="Logo" style="height: 32px; width: auto;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <span style="display: none; font-weight: bold; color: var(--color-primary); font-size: var(--font-size-lg);">CRM Nice</span>
            </a>
        </div>
        <div class="topbar__country dropdown">
            <button class="dropdown__trigger" type="button">
                {% if request.user.userprofile.country.flag_emoji %}{{ request.user.userprofile.country.flag_emoji }}{% else %}üåç{% endif %} {{ request.user.userprofile.country.name|default:"–ö—Ä–∞—ó–Ω–∞" }} <span class="dropdown__arrow">‚ñæ</span>
            </button>
            <div class="dropdown__menu">
                {% for country in countries %}
                <a href="#" class="dropdown__item">{{ country.flag_emoji }} {{ country.name }}</a>
                {% endfor %}
            </div>
        </div>
        <div class="topbar__datetime">
            <span id="current-datetime">2 —Å–µ–Ω—Ç—è–±—Ä—è 2025 22:40</span>
        </div>
    </div>
    
    <!-- –ú–µ–Ω—é –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó -->
    <button class="topbar__menu-toggle" onclick="toggleMobileMenu()">‚ò∞</button>
    <nav class="topbar__nav" id="mobile-nav">
        <a href="{% url 'myapp:clients' %}" 
           hx-get="{% url 'myapp:clients' %}" 
           hx-target="#main-content" 
           hx-push-url="true"
           class="topbar__nav-link">–ö–ª–∏–µ–Ω—Ç—ã</a>
        <a href="{% url 'myapp:tasks' %}" 
           hx-get="{% url 'myapp:tasks' %}" 
           hx-target="#main-content" 
           hx-push-url="true"
           class="topbar__nav-link">–ó–∞–¥–∞—á–∏</a>
        <a href="{% url 'myapp:company_list' %}" 
           hx-get="{% url 'myapp:company_list' %}" 
           hx-target="#main-content" 
           hx-push-url="true"
           class="topbar__nav-link">–ö–æ–º–ø–∞–Ω–∏–∏</a>
        <a href="{% url 'myapp:sales' %}" 
           hx-get="{% url 'myapp:sales' %}" 
           hx-target="#main-content" 
           hx-push-url="true"
           class="topbar__nav-link">–ü—Ä–æ–¥–∞–∂–∏</a>
        <a href="{% url 'myapp:seo' %}" 
           hx-get="{% url 'myapp:seo' %}" 
           hx-target="#main-content" 
           hx-push-url="true"
           class="topbar__nav-link">SEO</a>
        <a href="{% url 'myapp:franchises' %}" 
           hx-get="{% url 'myapp:franchises' %}" 
           hx-target="#main-content" 
           hx-push-url="true"
           class="topbar__nav-link">–§—Ä–∞–Ω—à–∏–∑—ã</a>
        <a href="{% url 'myapp:finances' %}" 
           hx-get="{% url 'myapp:finances' %}" 
           hx-target="#main-content" 
           hx-push-url="true"
           class="topbar__nav-link">–§–∏–Ω–∞–Ω—Å—ã</a>
    </nav>
    
    <!-- –ü—Ä–∞–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ -->
    <div class="topbar__right">
        <!-- –ü–æ—à—É–∫ -->
        <div class="topbar__search">
            <input type="search" 
                   class="topbar__search-input" 
                   placeholder="üîç –ü–æ–∏—Å–∫..." 
                   name="search"
                   hx-get="{% url 'myapp:company_list' %}"
                   hx-trigger="keyup changed delay:300ms, search"
                   hx-target="#main-content"
                   hx-push-url="true"
                   hx-include="this">
        </div>
        
        <!-- –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å" -->
        <div class="topbar__add dropdown">
            <button class="button button--primary dropdown__trigger" type="button">
                + –î–æ–±–∞–≤–∏—Ç—å <span class="dropdown__arrow">‚ñæ</span>
            </button>
            <div class="dropdown__menu dropdown__menu--right">
                <a href="#" class="dropdown__item dropdown__item--disabled">–ö–ª–∏–µ–Ω—Ç–∞</a>
                <a href="#" class="dropdown__item dropdown__item--disabled">–ó–∞–¥–∞—á—É</a>
                <a href="{% url 'myapp:company_create' %}" 
                   hx-get="{% url 'myapp:company_create' %}" 
                   hx-target="#main-content" 
                   hx-push-url="true"
                   class="dropdown__item">–ö–æ–º–ø–∞–Ω–∏—é</a>
            </div>
        </div>
        
        <!-- User menu -->
        <div class="topbar__user dropdown">
            <button class="dropdown__trigger" type="button">
                üë§ –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤ <span class="dropdown__arrow">‚ñæ</span>
            </button>
            <div class="dropdown__menu dropdown__menu--right">
                <div class="dropdown__item dropdown__item--info">
                    –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥: 10.12.2025 14:30
                </div>
                <hr class="dropdown__divider">
                <a href="{% url 'myapp:settings_dashboard' %}" 
                   hx-get="{% url 'myapp:settings_dashboard' %}" 
                   hx-target="#main-content" 
                   hx-push-url="true"
                   class="dropdown__item">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
                <a href="#" class="dropdown__item">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</a>
                <a href="#" class="dropdown__item">–û—Ç—á—ë—Ç—ã</a>
                <hr class="dropdown__divider">
                <a href="{% url 'myapp:logout' %}" class="dropdown__item">–í—ã—Ö–æ–¥</a>
            </div>
        </div>
    </div>
</header>

