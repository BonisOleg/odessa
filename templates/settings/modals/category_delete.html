{% load static %}

<div class="modal" id="modal-category-delete" data-modal-id="category-delete">
    <div class="modal__overlay" data-action="close-modal"></div>
    <div class="modal__content">
        <div class="modal__header">
            <h2 class="modal__title">Удалить раздел</h2>
            <button type="button" class="modal__close" data-action="close-modal" aria-label="Закрыть">×</button>
        </div>
        <div class="modal__body">
            <p>Вы уверены, что хотите удалить раздел <strong>{{ category.name }}</strong>?</p>
            {% if companies_count > 0 %}
            <p class="text-muted">Невозможно удалить раздел, так как к нему привязано {{ companies_count }} компаний.</p>
            {% else %}
            <p class="text-muted">Это действие нельзя отменить.</p>
            {% endif %}
        </div>
        <div class="modal__footer">
            <button type="button" class="button button--secondary" data-action="close-modal">Отмена</button>
            {% if companies_count == 0 %}
            <form method="post" class="form-inline" action="{% url 'myapp:category_delete' category.pk %}" hx-post="{% url 'myapp:category_delete' category.pk %}" hx-target="#main-content" hx-swap="innerHTML">
                {% csrf_token %}
                <button type="submit" class="button button--danger">Удалить</button>
            </form>
            {% endif %}
        </div>
    </div>
</div>

