{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/components/layout.css' %}">
<link rel="stylesheet" href="{% static 'css/components/topbar.css' %}">
<link rel="stylesheet" href="{% static 'css/components/button.css' %}">
<link rel="stylesheet" href="{% static 'css/components/dropdown.css' %}">
<link rel="stylesheet" href="{% static 'css/components/badge.css' %}">
<link rel="stylesheet" href="{% static 'css/components/form.css' %}">
<link rel="stylesheet" href="{% static 'css/components/modal.css' %}">
<link rel="stylesheet" href="{% static 'css/components/message.css' %}">
<link rel="stylesheet" href="{% static 'css/components/table.css' %}">
<link rel="stylesheet" href="{% static 'css/components/company.css' %}">
<link rel="stylesheet" href="{% static 'css/components/filter.css' %}">
<link rel="stylesheet" href="{% static 'css/utilities/spacing.css' %}">
<link rel="stylesheet" href="{% static 'css/utilities/text.css' %}">
{% block page_css %}{% endblock %}
{% endblock %}

{% block content %}
{% include 'components/topbar.html' %}

<div class="layout">
    <main id="main-content" class="layout__main">
        {% if messages %}
        <div class="messages-container">
            {% for message in messages %}
            <div class="message message--{{ message.tags|default:'info' }}" role="alert">
                <div class="message__text">{{ message }}</div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
        {% block page_content %}{% endblock %}
    </main>
</div>

<!-- Mobile Bottom Search Bar -->
<div class="mobile-bottom-search" id="mobile-bottom-search">
    <input type="search" 
           class="mobile-search-input" 
           placeholder="üîç –ü–æ–∏—Å–∫..." 
           name="search"
           hx-get="{% url 'myapp:company_list' %}"
           hx-trigger="keyup changed delay:300ms, search"
           hx-target="#main-content"
           hx-push-url="true"
           hx-include="this">
</div>

<!-- Mobile Menu & Filter Buttons -->
<div class="mobile-actions">
    <button class="mobile-action-btn" id="mobile-menu-btn" type="button" title="–ú–µ–Ω—é">‚ò∞</button>
    <button class="mobile-action-btn" id="mobile-filter-btn" type="button" title="–§–∏–ª—å—Ç—Ä—ã">üîç</button>
</div>

<!-- Mobile Menu Overlay -->
<div class="mobile-menu-overlay" id="mobile-menu-overlay">
    <div class="mobile-menu-content">
        <div class="mobile-menu-header">
            <h3>–ú–µ–Ω—é</h3>
            <button class="mobile-menu-close" type="button">√ó</button>
        </div>
        <nav class="mobile-menu-nav">
            <a href="{% url 'myapp:clients' %}" 
               hx-get="{% url 'myapp:clients' %}" 
               hx-target="#main-content" 
               hx-push-url="true"
               class="mobile-menu-link">–ö–ª–∏–µ–Ω—Ç—ã</a>
            <a href="{% url 'myapp:tasks' %}" 
               hx-get="{% url 'myapp:tasks' %}" 
               hx-target="#main-content" 
               hx-push-url="true"
               class="mobile-menu-link">–ó–∞–¥–∞—á–∏</a>
            <a href="{% url 'myapp:company_list' %}" 
               hx-get="{% url 'myapp:company_list' %}" 
               hx-target="#main-content" 
               hx-push-url="true"
               class="mobile-menu-link">–ö–æ–º–ø–∞–Ω–∏–∏</a>
            <a href="{% url 'myapp:sales' %}" 
               hx-get="{% url 'myapp:sales' %}" 
               hx-target="#main-content" 
               hx-push-url="true"
               class="mobile-menu-link">–ü—Ä–æ–¥–∞–∂–∏</a>
            <a href="{% url 'myapp:seo' %}" 
               hx-get="{% url 'myapp:seo' %}" 
               hx-target="#main-content" 
               hx-push-url="true"
               class="mobile-menu-link">SEO</a>
            <a href="{% url 'myapp:franchises' %}" 
               hx-get="{% url 'myapp:franchises' %}" 
               hx-target="#main-content" 
               hx-push-url="true"
               class="mobile-menu-link">–§—Ä–∞–Ω—à–∏–∑—ã</a>
            <a href="{% url 'myapp:finances' %}" 
               hx-get="{% url 'myapp:finances' %}" 
               hx-target="#main-content" 
               hx-push-url="true"
               class="mobile-menu-link">–§–∏–Ω–∞–Ω—Å—ã</a>
        </nav>
    </div>
</div>

<!-- Mobile Filter Overlay -->
<div class="mobile-filter-overlay" id="mobile-filter-overlay">
    <div class="mobile-filter-content">
        <div class="mobile-filter-header">
            <h3>–§–∏–ª—å—Ç—Ä—ã</h3>
            <button class="mobile-filter-close" type="button">√ó</button>
        </div>
        <div class="mobile-filter-body" id="mobile-filter-body">
            <!-- Filters will be moved here on mobile -->
        </div>
    </div>
</div>
{% endblock %}